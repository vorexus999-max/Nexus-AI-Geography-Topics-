<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nexus AI - Ultimate 100 Countries</title>
<style>
body { margin:0; font-family:Arial,sans-serif; display:flex; flex-direction:column; height:100vh; background:#f5f5f5; }
#header { background:#1f2937; color:#fff; padding:15px; text-align:center; font-size:22px; font-weight:bold; }
#chatContainer { flex:1; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:8px; }
.bubble { max-width:70%; padding:12px 18px; border-radius:15px; word-wrap:break-word; line-height:1.5; opacity:0; animation:fadeIn 0.3s forwards; }
@keyframes fadeIn { to{opacity:1;} }
.userBubble { background:#007bff; color:#fff; align-self:flex-end; border-bottom-right-radius:0; }
.nexusBubble { background:#e2e2e2; color:#000; align-self:flex-start; border-bottom-left-radius:0; }
#inputBar { display:flex; padding:10px; background:#ddd; border-top:1px solid #ccc; }
#userInput { flex:1; padding:10px; font-size:16px; border-radius:8px; border:1px solid #aaa; outline:none; }
#sendBtn { margin-left:10px; padding:10px 15px; font-size:16px; border-radius:8px; border:none; background:#007bff; color:#fff; cursor:pointer; }
#sendBtn:hover { background:#0056b3; }
img.flag { width:40px; vertical-align:middle; margin-right:5px; }
</style>
</head>
<body>

<div id="header">Nexus AI - Ultimate 100 Countries</div>
<div id="chatContainer"></div>
<div id="inputBar">
<input id="userInput" type="text" placeholder="Ask about countries, capitals, leaders, GDP, landmarks..." onkeydown="if(event.key==='Enter') send()">
<button id="sendBtn" onclick="send()">Send</button>
</div>

<script>
let memory = [];
let countriesDB = {};
let smallTalkReplies = [
  "Hello! How's your day going?",
  "Hi! What are you up to today?",
  "Hey there! I'm here to chat about geography or anything else you like.",
  "Hello! Curious about any place in the world today?"
];

// Load countries JSON
fetch('countries.json')
  .then(res => res.json())
  .then(data => { countriesDB = data; })
  .catch(err => console.error("Failed to load countries.json", err));

function detectIntent(text){
  text = text.toLowerCase();
  if(/country|countries|capital|city|landmark|mountain|river|continent|president|leader|gdp|population|currency|area|timezone|flag|climate|independence/.test(text)){
    return "geography";
  }
  if(/hi|hello|hey|yo|hiya/.test(text) || /how are you|what's up|thanks|bye/.test(text)){
    return "smallTalk";
  }
  return "unknown";
}

function nexusAI(text){
  memory.push({user:text});
  if(memory.length>100) memory.shift();
  text = text.trim().toLowerCase();
  const intent = detectIntent(text);

  if(intent==="geography"){
    for(const country in countriesDB){
      if(text.includes(country.toLowerCase())){
        const d = countriesDB[country];
        return `${country} (${d.continent})\nCapital: ${d.capital}\nLandmark: ${d.landmark}\nLeader: ${d.leader}\nIndependence: ${d.independence}\nGDP per Capita: ${d.gdpPerCapita}\nPopulation: ${d.population}\nLanguage: ${d.language}\nCurrency: ${d.currency}\nArea: ${d.area}\nTimezone: ${d.timezone}\nClimate: ${d.climate}\nMain River: ${d.mainRiver}\nMain Mountain: ${d.mainMountain}\nHistory: ${d.history}\nEconomy: ${d.economy}\nFlag: ${d.flag}`;
      }
    }
    return "I can provide info about countries. Please specify a country name.";
  }

  if(intent==="smallTalk"){
    return smallTalkReplies[Math.floor(Math.random()*smallTalkReplies.length)];
  }

  return "I don't understand. Could you clarify your geography question?";
}

function send(){
  const container=document.getElementById("chatContainer");
  const inputEl=document.getElementById("userInput");
  const text=inputEl.value.trim();
  if(!text) return;

  const userDiv=document.createElement("div");
  userDiv.className="bubble userBubble";
  userDiv.textContent=text;
  container.appendChild(userDiv);

  const reply=nexusAI(text);
  const nexusDiv=document.createElement("div");
  nexusDiv.className="bubble nexusBubble";
  nexusDiv.textContent=reply;
  container.appendChild(nexusDiv);

  container.scrollTop=container.scrollHeight;
  inputEl.value="";
}
</script>

</body>
</html>
