<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nexus AI Conversational</title>
<style>
body { margin:0; font-family:Arial,sans-serif; display:flex; flex-direction:column; height:100vh; background:#f5f5f5; }
#header { background:#1f2937; color:#fff; padding:15px; text-align:center; font-size:22px; font-weight:bold; }
#chatContainer { flex:1; padding:10px; overflow-y:auto; display:flex; flex-direction:column; gap:8px; }
.bubble { max-width:70%; padding:12px 18px; border-radius:15px; word-wrap:break-word; line-height:1.5; opacity:0; animation:fadeIn 0.3s forwards; }
@keyframes fadeIn { to{opacity:1;} }
.userBubble { background:#007bff; color:#fff; align-self:flex-end; border-bottom-right-radius:0; }
.nexusBubble { background:#e2e2e2; color:#000; align-self:flex-start; border-bottom-left-radius:0; }
#inputBar { display:flex; padding:10px; background:#ddd; border-top:1px solid #ccc; }
#userInput { flex:1; padding:10px; font-size:16px; border-radius:8px; border:1px solid #aaa; outline:none; }
#sendBtn { margin-left:10px; padding:10px 15px; font-size:16px; border-radius:8px; border:none; background:#007bff; color:#fff; cursor:pointer; }
#sendBtn:hover { background:#0056b3; }
</style>
</head>
<body>

<div id="header">Nexus AI</div>
<div id="chatContainer"></div>
<div id="inputBar">
<input id="userInput" type="text" placeholder="Type a message..." onkeydown="if(event.key==='Enter') send()">
<button id="sendBtn" onclick="send()">Send</button>
</div>

<script>
// Memory percakapan
let memory = [];
let lastTopics = [];
let lastUserInput = "";

// Joke database
const jokes = [
 "Why did the scarecrow win an award? Because he was outstanding in his field!",
 "Why don't scientists trust atoms? Because they make up everything!",
 "I told my computer I needed a break, and it said: 'No problem, I'll go to sleep!'",
 "Why did the math book look sad? Because it had too many problems.",
 "What do you call fake spaghetti? An impasta!",
 "Why was the broom late? It swept in.",
 "Why did the coffee file a police report? It got mugged.",
 "Why did the chicken join a band? Because it had the drumsticks!",
 "What do you call cheese that isn't yours? Nacho cheese!",
 "Why did the cookie go to the hospital? Because it felt crummy!"
];

// Topik dan jawaban
const topicReplies = {
  smallTalk: [
    "Hello! I'm Nexus AI. How's your day going?",
    "Hi there! What are you up to today?",
    "Hey! I'm here to chat and help you with anything."
  ],
  identity: [
    "I'm Nexus AI, an advanced AI chatbot. I can chat, answer questions, tell jokes, and remember context.",
    "Nexus AI at your service! I can discuss topics, help you learn, or just have casual conversation."
  ],
  joke: jokes,
  travel: [
    "I can recommend amazing destinations or hidden gems. Where are you planning to go?",
    "If you want to know the best places to visit, I can provide detailed travel info."
  ],
  geography: [
    "I can provide information about countries, capitals, locations, landmarks, rivers, and mountains."
  ],
  history: [
    "I can give detailed info about historical events, revolutions, empires, and famous leaders."
  ],
  math: [
    "I can explain concepts, solve problems, or guide you through equations step by step."
  ],
  coding: [
    "I can explain algorithms, provide code samples, debug scripts, or help you with programming concepts."
  ],
  game: [
    "I can discuss game genres, strategies, or provide tips for popular PC and console games."
  ],
  music: [
    "I can discuss music theory, instruments, artists, or suggest songs based on your taste."
  ],
  movie: [
    "I can provide information about movies, series, anime, characters, and plot discussions."
  ],
  food: [
    "I can discuss recipes, cuisines, nutrition, or give tips for cooking meals."
  ],
  sport: [
    "I can discuss matches, players, rules, and strategies for various sports."
  ],
  health: [
    "I can provide guidance about exercise, wellness, mental health, and general medical info."
  ],
  weather: [
    "I can explain weather patterns, forecasts, and climate info for different regions."
  ],
  social: [
    "I can discuss relationships, communication, communities, or give advice on social dynamics."
  ],
  literature: [
    "I can discuss books, authors, literary analysis, genres, and writing techniques."
  ],
  philosophy: [
    "I can discuss ethics, morality, beliefs, religion, and philosophical questions."
  ],
  science: [
    "I can explain physics, chemistry, biology, experiments, research, and technology."
  ],
  art: [
    "I can discuss painting, drawing, sculpture, photography, museums, galleries, and famous artists."
  ],
  economy: [
    "I can discuss finance, stocks, business, markets, trade, investments, and crypto."
  ],
  politics: [
    "I can discuss government, policies, elections, laws, and political events."
  ],
  psychology: [
    "I can discuss behavior, emotions, stress, therapy, and motivation."
  ],
  misc: [
    "I can chat about random topics, memes, trends, and general knowledge."
  ]
};

// Small talk predefined
const smallTalkReplies = {
  greeting:["Hello! How's it going?","Hi there! What are you up to?","Hey! I'm here to chat!"],
  howAreYou:["I'm fine, thank you! How about you?","Doing well! How's your day?","All good here. And you?"],
  whatsUp:["Not much, just chatting with you!","Just here to help. What's up?","Running my AI engine. How's it going?"],
  thanks:["You're welcome!","No problem!","Anytime!","Glad I could help!"],
  bye:["Goodbye! Talk to you later.","See you soon!","Take care!","Bye!"]
};

// Context-aware topic detection
function detectTopics(text){
    text=text.toLowerCase();
    let detected=[];

    // Small talk & identity
    if(/hi|hello|hey|yo|hiya/.test(text)) detected.push("smallTalk");
    if(/how are you|how's it going/.test(text)) detected.push("smallTalk");
    if(/what's up|sup/.test(text)) detected.push("smallTalk");
    if(/thank|thanks/.test(text)) detected.push("smallTalk");
    if(/bye|goodbye|see you/.test(text)) detected.push("smallTalk");
    if(/who are you|what is this|what can you do/.test(text)) detected.push("identity");

    // Joke
    if(/tell me a joke|give me a joke|make me laugh|funny|pun|knock knock/.test(text)) detected.push("joke");

    // Travel
    if(/best country|favorite city|top destination|places to visit/.test(text)) detected.push("travel");

    // Geography
    if(/capital of|located in|borders with|coordinates|where is|country information/.test(text)) detected.push("geography");

    // History
    if(/when was|historical event|ancient|revolution|king|empire/.test(text)) detected.push("history");

    // Math
    if(/solve|calculate|equation|sum|subtract|multiply|divide/.test(text)) detected.push("math");

    // Coding
    if(/how to code|write a script|algorithm|python|javascript|html/.test(text)) detected.push("coding");

    // Game
    if(/game|gaming|play|console|rpg|fps/.test(text)) detected.push("game");

    // Music
    if(/music|song|band|piano|guitar|melody/.test(text)) detected.push("music");

    // Movie
    if(/movie|film|cinema|series|anime/.test(text)) detected.push("movie");

    // Food
    if(/food|eat|hungry|meal|recipe|cooking/.test(text)) detected.push("food");

    // Sport
    if(/sport|soccer|basketball|tennis|football/.test(text)) detected.push("sport");

    // Health
    if(/health|exercise|fitness|diet|mental health|doctor|sick/.test(text)) detected.push("health");

    // Weather
    if(/weather|rain|sun|storm|temperature|forecast|climate|snow/.test(text)) detected.push("weather");

    // Social
    if(/friend|social|chat|relationship|family|love/.test(text)) detected.push("social");

    // Literature
    if(/book|novel|story|author|literature|write|poetry/.test(text)) detected.push("literature");

    // Philosophy
    if(/philosophy|ethics|morality|religion|belief|god/.test(text)) detected.push("philosophy");

    // Science
    if(/science|physics|chemistry|biology|experiment|technology|ai|robotics|space/.test(text)) detected.push("science");

    // Art
    if(/art|painting|drawing|sculpture|photography|gallery|museum/.test(text)) detected.push("art");

    // Economy
    if(/money|finance|stock|economy|business|trade|investment|market|crypto/.test(text)) detected.push("economy");

    // Politics
    if(/politics|government|law|president|election|policy|constitution|rights/.test(text)) detected.push("politics");

    // Psychology
    if(/psychology|mind|emotion|behavior|stress|depression|therapy/.test(text)) detected.push("psychology");

    if(detected.length===0 && lastTopics.length>0) detected=lastTopics;
    lastTopics=detected;
    return detected.length>0 ? detected : ["misc"];
}

// Nexus AI response
function nexusAI(text){
    memory.push({user:text, topics:lastTopics});
    if(memory.length>50) memory.shift();
    text=text.trim().toLowerCase();

    // Small talk
    if(["hi","hello","hey","yo","hiya"].includes(text)) return smallTalkReplies.greeting[Math.floor(Math.random()*smallTalkReplies.greeting.length)];
    if(text.includes("how are you")||text.includes("how's it going")) return smallTalkReplies.howAreYou[Math.floor(Math.random()*smallTalkReplies.howAreYou.length)];
    if(text.includes("what's up")||text.includes("sup")) return smallTalkReplies.whatsUp[Math.floor(Math.random()*smallTalkReplies.whatsUp.length)];
    if(text.includes("thank")||text.includes("thanks")) return smallTalkReplies.thanks[Math.floor(Math.random()*smallTalkReplies.thanks.length)];
    if(text.includes("bye")||text.includes("goodbye")||text.includes("see you")) return smallTalkReplies.bye[Math.floor(Math.random()*smallTalkReplies.bye.length)];
    if(text.includes("who are you")||text.includes("what is this")) return "I'm Nexus AI, an advanced AI chatbot designed to chat, answer questions, tell jokes, and remember conversation context.";

    const detected=detectTopics(text);
    let responses=[];
    for(let t of detected){
        if(topicReplies[t]){
            if(t==="joke"){
                if(/give me a joke|tell me a joke|make me laugh/.test(text)){
                    responses.push(topicReplies[t][Math.floor(Math.random()*topicReplies[t].length)]);
                } else {
                    if(Math.random()<0.5) responses.push(topicReplies[t][Math.floor(Math.random()*topicReplies[t].length)]);
                    else responses.push("I don't laugh");
                }
            } else {
                responses.push(topicReplies[t][Math.floor(Math.random()*topicReplies[t].length)]);
            }
        }
    }
    return responses.length>0 ? responses.join(" ") : "I don't understand. Could you clarify?";
}

// Send message
function send(){
  const container=document.getElementById("chatContainer");
  const inputEl=document.getElementById("userInput");
  const text=inputEl.value.trim();
  if(!text) return;

  const userDiv=document.createElement("div");
  userDiv.className="bubble userBubble";
  userDiv.textContent=text;
  container.appendChild(userDiv);

  const reply=nexusAI(text);
  const nexusDiv=document.createElement("div");
  nexusDiv.className="bubble nexusBubble";
  nexusDiv.textContent=reply;
  container.appendChild(nexusDiv);

  container.scrollTop=container.scrollHeight;
  inputEl.value="";
}
</script>

</body>
</html>
